<?php

namespace ManagerBundle\Repository;

use Doctrine\Common\Collections\ArrayCollection;
use ManagerBundle\Entity\Account;
use ManagerBundle\Entity\Broker;

/**
 * BrokerRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class BrokerRepository extends CRUDRepository
{
    /**
     * @param Account $account
     *
     * @return Broker
     */
    public function findByAccount(Account $account)
    {
        return $this->findOneBy([
            'account' => $account
        ]);
    }

    /**
     * @param ArrayCollection[Commission] $commissions
     */
    public function saveCommissions(ArrayCollection $commissions): void
    {
        $em = $this->getEntityManager();
        dump($commissions);die();
        foreach ($commissions as $commission) {
            $em->persist($commission);
        }

        $em->flush();
    }
}
