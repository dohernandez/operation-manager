{% extends 'ManagerBundle:Layout:edit.form.html.twig' %}

{% block avanzu_head %}
    {{ parent() }}
    <style>
        .managerbundle-broker-account-box-body {
            padding: 10px 20px;
        }

        .managerbundle-broker-account-box-body .with-border {
            border-bottom: 1px solid #f4f4f4;
            padding-bottom: 10px;
        }
    </style>
    <!-- bootstrap multiselect -->
    <link rel="stylesheet" href="{{ asset('theme/plugins/select2/select2.min.css') }}">
    {#{% include 'ManagerBundle:commission:_header.form.html.twig' with {'entity': 'broker'} %}#}
{% endblock %}

{% block avanzu_javascripts_inline %}
    {{ parent() }}
    <!-- bootstrap multiselect -->
    <script src="{{ asset('theme/plugins/select2/select2.min.js') }}"></script>

    <script>
        $(document).ready(function () {
            var $markets = $('#managerbundle_broker_markets');
            $markets.select2();

            var $type = $('#managerbundle_broker_type');

            if (!$type.val()) {
                $markets.prop('required', false);
                $markets.parent().parent().hide();
            }

            // When region gets selected ...
            $type.change(function() {
                if (this.value == 'stocks') {
                    $markets.prop('required', true);
                    $markets.parent().parent().show();
                } else {
                    // unselect all
                    $markets.val('').trigger("change");

                    $markets.prop('required', false);
                    $markets.parent().parent().hide();
                }
            });
        });
    </script>
{% endblock %}