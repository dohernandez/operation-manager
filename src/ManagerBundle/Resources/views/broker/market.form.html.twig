{% extends 'ManagerBundle:Layout:edit.form.html.twig' %}


{% block avanzu_head %}
    {{ parent() }}

    {% include 'ManagerBundle:commission:_header.form.html.twig' with {
        'entity': 'broker_markets'
    } %}

    <style>
        .tab-pane > div.col-sm-12{
            padding: 10px 0px 0px;
            margin: 10px 0px;
        }
    </style>

    <!-- bootstrap multiselect -->
    <link rel="stylesheet" href="{{ asset('theme/plugins/select2/select2.min.css') }}">
{% endblock %}

{% block avanzu_javascripts_inline %}
    {{ parent() }}

    <!-- bootstrap multiselect -->
    <script src="{{ asset('theme/plugins/select2/select2.min.js') }}"></script>

    <script>
        // keep track of how many email fields have been rendered
        var count = '{{ form.commissions|length }}';
    </script>

    {% include 'ManagerBundle:commission:_scripts.form.html.twig' with {
        'entity': 'broker_markets'
    } %}

    <script>
        {%- for borker_market in form.vars.value.markets -%}
            {%- if borker_market.market is instanceof("ManagerBundle\\Entity\\CryptocurrencyMarket")-%}
                var $cryprocurrency = $('#managerbundle_broker_markets_{{ loop.index0 }}_market_cryptocurrencies');

                $cryprocurrency.select2({
                    placeholder: 'Choose a cryprocurrency'
                });
            {%- else -%}
                var $stocks = $('#managerbundle_broker_markets_{{ loop.index0 }}_market_stocks');

                $stocks.select2({
                    placeholder: 'Choose a stock'
                });
            {%- endif -%}
        {%- endfor -%}
    </script>
{% endblock %}