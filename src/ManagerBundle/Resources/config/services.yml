parameters:
    broker_type:
      - stocks
      - cryptocurrencies
    commission_type:
      - buy
      - sell
      - custody
      - initial_margin
      - maintenance_margin
    commission_period:
      - only_one
      - daily
      - monthy
      - yearly
    commission_applied:
      - per_stock
      - per_currency
      - per_amount
      - fixed

services:
#    manager.example:
#        class: ManagerBundle\Example
#        arguments: ["@service_id", "plain_value", "%parameter%"]

    ManagerBundle\Twig\ManagerExtension:
        tags: [twig.extension]

    manager.broker.markers.transformer:
        class: ManagerBundle\Form\DataTransformer\BrokerMarketToMarketTransformer
        arguments: ["@=container.get('doctrine').getManager().getRepository('ManagerBundle:BrokerMarket')"]
        tags: [form.type]

    ManagerBundle\Form\BrokerType:
        arguments: ["%broker_type%", "@manager.broker.markers.transformer"]
        tags: [form.type]

    ManagerBundle\Form\BrokerMarketEntityType:
        arguments: ["@manager.broker.markers.transformer"]
        tags: [form.type]

    ManagerBundle\Form\CommissionType:
        arguments: ["%commission_type%", "%commission_period%", "%commission_applied%"]
        tags: [form.type]

    ManagerBundle\Form\MarketCommissionType:
        arguments: ["%commission_type%", "%commission_period%", "%commission_applied%"]
        tags: [form.type]

    manager.broker.saved.transfer:
        class: ManagerBundle\EventListener\SavedTransfer\BrokerListener
        arguments: ["@=container.get('doctrine').getManager().getRepository('ManagerBundle:Broker')"]
        tags:
            - { name: kernel.event_listener, event: crud.post_saved.Transfer, method: onSavedTransfer }
